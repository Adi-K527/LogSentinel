FROM python:3.10-slim

ARG KAFKA_TOPIC
ARG DB_URI
ARG IP_ADDRESS
ARG OPENAI_API_KEY
ARG AWS_ACCESS_KEY_ID
ARG AWS_SECRET_ACCESS_KEY
ARG SNS_ARN

ENV KAFKA_TOPIC=${KAFKA_TOPIC}
ENV DB_URI=${DB_URI}
ENV IP_ADDRESS=${IP_ADDRESS}
ENV OPENAI_API_KEY=${OPENAI_API_KEY}
ENV AWS_ACCESS_KEY_ID=${AWS_ACCESS_KEY_ID}
ENV AWS_SECRET_ACCESS_KEY=${AWS_SECRET_ACCESS_KEY}
ENV SNS_ARN=${SNS_ARN}

WORKDIR /app

COPY . /app/

RUN pip install --no-cache-dir -r /app/requirements.txt

ENTRYPOINT [ "python", "main.py" ]